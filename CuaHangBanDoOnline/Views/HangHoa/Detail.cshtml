@model CuaHangBanDoOnline.Models.HangHoa

<style>
    .product-container {
        max-width: 600px;
        margin: 20px auto;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        background-color: #fff;
    }

    .product-image {
        text-align: center;
        margin-bottom: 20px;
    }

        .product-image img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
        }

    .product-info {
        margin-bottom: 20px;
    }

        .product-info p {
            margin: 5px 0;
        }

        .product-info strong {
            color: #333;
        }

    .button-container {
        display: flex;
        justify-content: space-between;
    }

        .button-container button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            background-color: #28a745;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }

            .button-container button:hover {
                background-color: #218838;
            }

    .price-original {
        color: #888;
        text-decoration: line-through;
        margin-right: 10px;
    }

    .price-discounted {
        color: #dc3545;
        font-weight: bold;
    }

    .discount-badge {
        background-color: #dc3545;
        color: white;
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 0.9em;
        margin-left: 10px;
    }

    /* New styles for product details section */
    .product-details {
        margin-top: 20px;
        padding: 15px;
        border-top: 1px solid #ddd;
    }

        .product-details h3 {
            color: #333;
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .product-details ul {
            list-style-type: disc;
            padding-left: 20px;
        }

            .product-details ul li {
                margin-bottom: 8px;
                color: #555;
            }

        .product-details p {
            margin: 10px 0;
            color: #555;
        }

    .highlight {
        color: #dc3545;
        font-weight: bold;
    }
</style>

<div class="product-container">
    <h2>@Model.TenHangHoa</h2>
    <div class="product-image">
        <img src="@Url.Content(Model.Hinh)" alt="@Model.TenHangHoa" />
    </div>
    <div class="product-info">
        <p><strong>Tình trạng:</strong> @(Model.SoLuongTon > 0 ? "Còn hàng" : "Hết hàng")</p>
        @if (ViewData[$"PhanTramGiamGia_{Model.MaHangHoa}"] != null && (decimal)ViewData[$"PhanTramGiamGia_{Model.MaHangHoa}"] > 0)
        {
            <p>
                <strong>Giá gốc:</strong> <span class="price-original">@Model.GiaGoc.ToString("N0") đ</span>
                <strong>Giá bán:</strong> <span class="price-discounted">@Model.GiaBan.ToString("N0") đ</span>
                <span class="discount-badge"> -@((decimal)ViewData[$"PhanTramGiamGia_{Model.MaHangHoa}"])%</span>
            </p>
        }
        else
        {
            <p><strong>Giá bán:</strong> @Model.GiaBan.ToString("N0") đ</p>
        }
        <p><strong>Mô tả:</strong> @Model.MoTa</p>
    </div>

    <!-- New Product Details Section -->
    <div class="product-details">
        <h3>Chi tiết sản phẩm</h3>
        <p><strong>Lưu ý:</strong></p>
        <ul>
            <li>Key chính hãng, đảm bảo chất lượng cao.</li>
        </ul>
        <p><strong>Quy trình nhận hàng:</strong></p>
        <ol>
            <li>Đặt hàng trực tiếp trên website hoặc liên hệ qua hotline.</li>
            <li>Thanh toán khi xác nhận đơn hàng</li>
            <li>Nhận tkey sản phẩm thông qua email</li>

        </ol>
        <p><strong>Tận hưởng giá trị vượt trội với sản phẩm này!</strong></p>
        <p>
            Sản phẩm mang đến trải nghiệm tuyệt vời với thiết kế hiện đại, chất lượng vượt trội.
            Được sản xuất bởi thương hiệu uy tín, đảm bảo độ bền và hiệu suất tối ưu cho mọi nhu cầu sử dụng.
        </p>
    </div>

    <div class="button-container">
        <!-- Quantity Input -->
        <div style="display: flex; align-items: center; margin-right: 10px;">
            <label for="soLuong" style="margin-right: 5px;">Số lượng:</label>
            <input type="number" id="soLuong" name="soLuong" value="1" min="1" max="@Model.SoLuongTon" style="width: 60px; padding: 5px; border: 1px solid #ddd; border-radius: 5px;" />
        </div>

        <!-- Buy Now Button -->
        <a href="@Url.Action("AddToCart", "GioHang", new { id = Model.MaHangHoa, soLuong = 1, redirectToCheckout = true })"
           onclick="this.href = this.href.replace('soLuong=1', 'soLuong=' + document.getElementById('soLuong').value)"
           class="btn-buy-now">
            Mua ngay
        </a>

        <!-- Add to Cart Button -->
        <a href="@Url.Action("AddToCart", "GioHang", new { id = Model.MaHangHoa, soLuong = 1, redirectToCheckout = false })"
           onclick="this.href = this.href.replace('soLuong=1', 'soLuong=' + document.getElementById('soLuong').value)"
           class="btn-add-to-cart">
            Thêm vào giỏ
        </a>
    </div>

    <style>
        /* Style for the buttons */
        .btn-buy-now, .btn-add-to-cart {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            text-decoration: none;
            transition: background-color 0.3s;
            text-align: center;
        }

        .btn-buy-now {
            background-color: #dc3545; /* Red for Buy Now */
        }

            .btn-buy-now:hover {
                background-color: #c82333;
            }

        .btn-add-to-cart {
            background-color: #28a745; /* Green for Add to Cart */
        }

            .btn-add-to-cart:hover {
                background-color: #218838;
            }
    </style>
</div>
<button onclick="addToCart(@Model.MaHangHoa)" class="btn btn-primary">Thêm vào giỏ hàng</button>
<button onclick="addToWishlist(@Model.MaHangHoa)" class="btn btn-secondary">Thêm vào wishlist</button>

<script>
    function addToCart(hangHoaId) {
        $.ajax({
            url: '/GioHang/AddToCart',
            method: 'POST',
            data: { id: hangHoaId, soLuong: 1 },
            success: function (response) {
                updateCartCount(); // Cập nhật số lượng giỏ hàng
                alert('Đã thêm sản phẩm vào giỏ hàng.');
            },
            error: function () {
                alert('Có lỗi xảy ra khi thêm vào giỏ hàng.');
            }
        });
    }

    function addToWishlist(hangHoaId) {
        $.ajax({
            url: '/Wishlist/AddToWishlist',
            method: 'POST',
            data: { id: hangHoaId },
            success: function (response) {
                updateWishlistCount(); // Cập nhật số lượng wishlist
                alert('Đã thêm sản phẩm vào danh sách yêu thích.');
            },
            error: function () {
                alert('Có lỗi xảy ra khi thêm vào danh sách yêu thích.');
            }
        });
    }
</script>```
